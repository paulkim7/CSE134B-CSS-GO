function getParseHabits(e){var t=Parse.object.extend("UserAccount"),n=new Parse.query(t);return new Promise(function(t,i){n.equalTo("id",e).find().then(function(e){(void 0===e||1!==e.size)&&i(),t(e[0].get(habits))})})}function confirmDelete(e){var t=confirm("Are you sure you want to delete this habit?");t&&(deleteHabit(e),removeParseHabit(e.id))}Parse.initialize("d2claNl95q01NDPLvJ5c6wss7ePAqKGn9l048Zqb","N344LtQrb8LdEIKU1M4dlsMSUZiXf1fEtSY16Of7"),checkForLogin(),window.onload=function(){var e=Parse.User.current(),t=document.getElementById("username");t.innerHTML=" ["+e.get("username")+"]";var n=e.relation("habits"),i=n.query(),d=document.getElementById("habit-list"),r=new Date,s=r.getDay();i.equalTo("Habit"),n.query().find().then(function(e){0===e.length&&(document.getElementById("noHabitContainer").className="centered");var t;for(t=0;t<e.length;++t){var n=e[t],i=n.id,r=n.get("title"),a=n.get("iconLoc"),o=(n.get("iconNum"),n.get("day")),l=(n.get("freq"),n.get("progVal")),m=n.get("dailyFreq"),u=n.get("streak"),c=n.get("record");if(!(document.getElementById("habit-"+i)||document.getElementById("nameLi-"+i)||document.getElementById("nameDiv-"+i)||document.getElementById("totalSpan-"+i)||document.getElementById("messSvg-"+i)||document.getElementById("messLine1-"+i)||document.getElementById("messLine2-"+i)||document.getElementById("today-"+i)||document.getElementById("habitOp-"+i)||document.getElementById("done-"+i)||document.getElementById("edit-"+i)||document.getElementById("del-"+i)||document.getElementById("doneImg-"+i)||document.getElementById("editImg-"+i)||document.getElementById("delImg-"+i)||document.getElementById("iconLi-"+i)||document.getElementById("iconImg-"+i)||document.getElementById("info-"+i))){var b=document.createElement("li"),g=document.createElement("li"),p=document.createElement("div"),A=document.createElement("li"),h=document.createElement("img"),y=document.createElement("ul"),E=document.createElement("div"),v=document.createElement("span"),I=document.createElement("svg"),C=document.createElement("line"),f=document.createElement("line"),B=document.createElement("span"),L=document.createElement("div"),H=document.createElement("button"),w=document.createElement("button"),k=document.createElement("button"),D=document.createElement("img"),q=document.createElement("img"),M=document.createElement("img"),P=document.createElement("br"),T=document.createElement("progress");b.setAttribute("id",i),g.setAttribute("id","nameLi-"+i),p.setAttribute("id","nameDiv-"+i),v.setAttribute("id","totalSpan-"+i),I.setAttribute("id","messSvg-"+i),C.setAttribute("id","messLine1-"+i),f.setAttribute("id","messLine2-"+i),B.setAttribute("id","today-"+i),L.setAttribute("id","habitOp-"+i),H.setAttribute("id","done-"+i),w.setAttribute("id","edit-"+i),k.setAttribute("id","del-"+i),D.setAttribute("id","doneImg-"+i),q.setAttribute("id","editImg-"+i),M.setAttribute("id","delImg-"+i),A.setAttribute("id","iconLi-"+i),h.setAttribute("id","iconImg-"+i),y.setAttribute("id","info-"+i),p.setAttribute("class","habit-name"),y.setAttribute("class","habit-info"),h.setAttribute("class","habit-icon"),h.setAttribute("src",a),h.setAttribute("alt","habit icon"),T.setAttribute("class","progressBar"),p.innerHTML=r,g.appendChild(p),A.appendChild(h),y.appendChild(g),y.appendChild(A),b.appendChild(y),C.setAttribute("x1","0"),C.setAttribute("y1","0"),C.setAttribute("x2","60"),C.setAttribute("y2","0"),C.setAttribute("style","stroke:rgba(65, 131, 215, 0.8);stroke-width:25"),f.setAttribute("x1","60"),f.setAttribute("y1","0"),f.setAttribute("x2","150"),f.setAttribute("y2","0"),f.setAttribute("style","stroke:rgba(171,171,171,0.6);stroke-width:25"),I.setAttribute("height","25"),I.setAttribute("width","150"),v.setAttribute("class","message-total"),I.appendChild(C),I.appendChild(f),T.value=l,0===m?(T.max=m,B.innerHTML="Completed <strong> "+l+"/"+m+"</strong> for today!"):(T.max=m,B.innerHTML="Completed <strong> "+l+"/"+m+"</strong> for today!"),v.innerHTML="<strong> "+u+"</strong> days in a row! Best Record: <strong> "+c+"</strong><br><br>",B.setAttribute("class","message-today"),E.setAttribute("class","message"),v.appendChild(T),E.appendChild(v),E.appendChild(P),E.appendChild(B),D.setAttribute("src","../img/done.svg"),D.setAttribute("alt","done"),q.setAttribute("src","../img/edit.svg"),q.setAttribute("alt","Edit"),M.setAttribute("src","../img/delete.svg"),M.setAttribute("alt","Del"),H.setAttribute("class","op op-done"),w.setAttribute("class","op op-edit"),k.setAttribute("class","op op-del"),H.setAttribute("type","button"),w.setAttribute("type","button"),k.setAttribute("type","button"),H.setAttribute("onclick","updateMsgProgBar(this);"),w.setAttribute("onclick","storeHabitID('"+i+"'); location.href='edit.html'"),k.setAttribute("id",i),k.setAttribute("onclick","confirmDelete(this);"),k.appendChild(M),w.appendChild(q),H.appendChild(D),L.setAttribute("class","habit-op"),L.appendChild(H),L.appendChild(w),L.appendChild(k),b.appendChild(y),b.appendChild(E),b.appendChild(L),d.appendChild(b);var x=JSON.parse(o);if(x[s]===!1)T.style.visibility="hidden",B.innerHTML="Habit is not available today.";else{var S="3dJ";S!==n.get("prevCheckedDay")&&(console.log("new day"),0===l&&(u=0),T.value=0,l=0,n.set("progVal",l),n.save()),B.innerHTML="Completed <strong> "+l+"/"+m+"</strong> for today!"}n.set("prevCheckedDay",S),n.save()}}})};