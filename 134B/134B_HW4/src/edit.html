<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Edit a habit</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.6.7.min.js"></script>
        <link rel="stylesheet" href="../css/forms.css">
        <script src="../js/edit.js"></script>
    </head>
    <body>
        <script>
            function onStart() {
                var habitToEdit = localStorage.getItem("editHabit");
                var habitToEditObj = JSON.parse(habitToEdit);
                
                localStorage.setItem("habitEditID", habitToEditObj.id);
                localStorage.setItem("habitBeforeChanges", JSON.stringify(habitToEditObj));
                document.getElementById("title").value = habitToEditObj.title;
                var i = 1;
                while (i < 5) {
                    if (document.getElementById("icon" + i).alt === habitToEditObj.icon) {

                        document.getElementById("icon" + i).style.border = "5px solid #42A5F5";
                        document.getElementById("img" + i).selected = "true";    

                        break;

                    }
                    i++;
                }

                var arrayDays = JSON.parse(habitToEditObj.day);
                
                var j = 0;
                while (j < arrayDays.length) {
                    if (arrayDays[j] === true) {
                        if (j === 0) {
                            document.getElementById("sun").checked = true;
                        }
                        if (j === 1) {
                            document.getElementById("mon").checked = true;
                        }
                        if (j === 2) {
                            document.getElementById("tues").checked = true;
                        }
                        if (j === 3) {
                            document.getElementById("wed").checked = true;
                        }
                        if (j === 4) {
                            document.getElementById("thurs").checked = true;
                        }
                        if (j === 5) {
                            document.getElementById("fri").checked = true;
                        }
                        if (j === 6) {
                            document.getElementById("sat").checked = true;
                        }
                    }

                    j++;
                }

                var arrayFreq = JSON.parse(habitToEditObj.freq);

                var k = 0;

                while (k < arrayFreq.length) {
                    if (arrayFreq[k] === true) {
                        if (k === 0) {
                            document.getElementById("freq1Btn").checked = true;
                        }
                        if (k === 1) {
                            document.getElementById("freq2Btn").checked = true;
                        }
                        if (k === 2) {
                            document.getElementById("freq3Btn").checked = true;
                        }
                    }
                    k++;
                }
                document.getElementById("others").value=habitToEditObj.freqOther;

            }

            window.onload = onStart;
        </script>
        <div class="forms">
            <h2>Edit A Habit</h2>
            <form>
                <p><label><span id="title_text">Habit Title</span></label></p>
                <p><input id="title" type="text" name="fullname" placeholder="Exercise 30 minutes"></p>
                <p><label>Habit Icon</label></p>
                <img id="icon1" class="icon" onclick="selectImage('icon1','img1');" src="../img/sleep.jpg" alt="../img/sleep.jpg"/>
				<img id="icon2" class="icon" onclick="selectImage('icon2','img2');" src="../img/salad.jpg" alt="../img/salad.jpg"/>
				<img id="icon3" class="icon" onclick="selectImage('icon3','img3');" src="../img/run.jpg" alt="../img/run.jpg"/>
				<img class="icon" src="../img/add.png" alt="find a image"/>
                
                <p><label>Weekly Frequency</label></p>
                <div id="ck-button">
                    <label> <input type="checkbox" name="date[]" value="sunday" id="sun"><span>Sun</span></label>
                    <label> <input type="checkbox" name="date[]" value="monday" id="mon"><span>Mon</span></label>
                    <label> <input type="checkbox" name="date[]" value="tuesday" id="tues"><span>Tues</span></label>
                    <label> <input type="checkbox" name="date[]" value="wednesday" id="wed"><span>Wed</span></label>
                    <label> <input type="checkbox" name="date[]" value="thursday" id="thurs"><span>Thur</span></label>
                    <label> <input type="checkbox" name="date[]" value="friday" id="fri"><span>Fri</span></label>
                    <label> <input type="checkbox" name="date[]" value="saturday" id="sat"><span>Sat</span></label>
                </div>
                <select id = "habits" name="images" hidden>
                    <option id="img1" value="../img/sleep.jpg">Select  </option>
                    <option id="img2" value="../img/salad.jpg">gold  </option>
                    <option id="img3" value="../img/run.jpg">silver  </option>
                </select>

                <p><label>Daily Frequency</label></p>
                <div id="daily-button">
                    <label> <input id="freq1Btn" type="checkbox" name="day[]" value="one" ><span>1</span></label>
                    <label> <input id="freq2Btn" type="checkbox" name="day[]" value="two" ><span>2</span></label>
                    <label> <input id="freq3Btn" type="checkbox" name="day[]" value="three"><span>3</span></label>
                    <span id="times">times</span>
                </div>
                <p><label><span id="others_text">Others: </span><input id="others" type="number" name="day" placeholder="More than 3 times"></label></p>
                <p id="save_p"><input id="save" type="button" value="Save It" onclick="validateInputs();"></p>

            </form>

        </div>
        <script>
            function selectImage(name, select) {
                //Clear all the other effects
                document.getElementById('icon1').style.border = "none";
                document.getElementById('icon2').style.border = "none";
                document.getElementById('icon3').style.border = "none";
                var image = document.getElementById(name);
                image.style.border = "5px solid #42A5F5";
                document.getElementById(select).selected = "true";
            }
        </script>
    </body>
</html>
